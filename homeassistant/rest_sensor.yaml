# Contact Energy REST Sensors
# Add this to your configuration.yaml
#
# Replace YOUR_API_SERVER_ADDRESS with:
#   - 127.0.0.1 if HA and the API run on the same machine (or HA uses --network=host)
#   - The server's IP address (e.g., 192.168.1.100) if HA uses bridge networking
#
# Replace YOUR_ELECTRICITY_CONTRACT_ID and YOUR_GAS_CONTRACT_ID with your Contract IDs
# (find them by calling GET /accounts on the API)

rest:
  # =============================================================================
  # ELECTRICITY SENSOR
  # =============================================================================
  - resource: http://YOUR_API_SERVER_ADDRESS:8000/contracts/YOUR_ELECTRICITY_CONTRACT_ID/summary
    scan_interval: 900  # 15 minutes
    sensor:
      - name: "Contact Energy Electricity Summary"
        unique_id: contact_energy_electricity_summary
        value_template: "{{ value_json.today.value | default(value_json.latest_day.value | default('unavailable')) }}"
        unit_of_measurement: "kWh"
        device_class: energy
        state_class: total_increasing
        json_attributes:
          - today
          - yesterday
          - this_month
          - last_month
          - comparisons
          - contract_id
          - latest_day
          - previous_day
          - data_as_of

  # =============================================================================
  # GAS SENSOR
  # =============================================================================
  - resource: http://YOUR_API_SERVER_ADDRESS:8000/contracts/YOUR_GAS_CONTRACT_ID/summary
    scan_interval: 3600  # 1 hour (gas data updates less frequently)
    sensor:
      - name: "Contact Energy Gas Summary"
        unique_id: contact_energy_gas_summary
        value_template: "{{ value_json.this_month.value | default('unavailable') }}"
        unit_of_measurement: "kWh"
        device_class: gas
        state_class: total_increasing
        json_attributes:
          - today
          - yesterday
          - this_month
          - last_month
          - comparisons
          - contract_id
          - latest_day
          - previous_day
          - data_as_of
