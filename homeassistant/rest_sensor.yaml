# Contact Energy REST Sensor
# Add this to your configuration.yaml
#
# Replace YOUR_API_SERVER_ADDRESS with:
#   - 127.0.0.1 if HA and the API run on the same machine (or HA uses --network=host)
#   - The server's IP address (e.g., 192.168.1.100) if HA uses bridge networking
#
# Replace YOUR_CONTRACT_ID with your Contact Energy contract ID
# (find it by calling GET /accounts on the API)

rest:
  - resource: http://YOUR_API_SERVER_ADDRESS:8000/contracts/YOUR_CONTRACT_ID/summary
    scan_interval: 900  # 15 minutes
    sensor:
      - name: "Contact Energy Summary"
        unique_id: contact_energy_summary
        value_template: "{{ value_json.today.value | default('unavailable') }}"
        unit_of_measurement: "kWh"
        device_class: energy
        state_class: total_increasing
        json_attributes:
          - today
          - yesterday
          - this_month
          - last_month
          - comparisons
          - contract_id
